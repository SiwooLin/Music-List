<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>시우린의 노래책</title>
  
  <!-- 구글 폰트 -->
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Jua&display=swap" rel="stylesheet">

  <!-- 기본 스타일 -->
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: url('images/bgmain.png') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Gowun Dodum', sans-serif;
      overflow-x: hidden;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      margin-top: 40px;
    }

    #title {
      font-family: 'Jua', sans-serif;
      font-size: 2.5em;
      color: #ff66b2;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
      cursor: pointer;
    }

    #title:hover {
      color: #ff8fc2;
    }

    .char {
      width: 80px;
      animation: float 3s ease-in-out infinite;
    }

    .char-left {
      position: absolute;
      left: 10%;
    }

    .char-right {
      position: absolute;
      right: 10%;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    nav {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 30px;
    }

    .category {
      padding: 8px 14px;
      background: #ffd6eb;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      transition: all 0.2s;
    }

    .category:hover {
      background: #ffb9e1;
      transform: scale(1.05);
    }

    .category.active {
      background: #ff8fc2;
      color: white;
    }

    .sort-button {
      font-size: 0.85em;
      background: #fff2a8;
      color: #a87100;
      border: none;
      padding: 6px 12px;
      margin-left: 20px;
      border-radius: 6px;
      cursor: pointer;
    }

    .search-container {
      margin: 30px auto;
      display: flex;
      justify-content: center;
    }

    .search-container input {
      width: 250px;
      padding: 8px 12px;
      padding-right: 40px;
      border: 1px solid #ccc;
      border-radius: 25px;
      font-size: 0.9em;
    }

    .search-container input::placeholder {
      color: #aaa;
      font-style: italic;
      background: url('data:image/svg+xml;utf8,<svg fill="%23ccc" viewBox="0 0 24 24" width="18" height="18" xmlns="http://www.w3.org/2000/svg"><path d="M21 20l-5.2-5.2a7 7 0 1 0-1.4 1.4L20 21z"/></svg>') no-repeat;
      background-position: right 10px center;
      background-size: 18px;
    }

    .notice {
      font-family: 'Jua', sans-serif;
      text-align: center;
      margin-top: 20px;
      font-size: 1.3em;
      color: #6a006a;
    }

    .table-wrapper {
      margin: 40px auto;
      width: 90%;
      max-width: 800px;
      background: rgba(255,255,255,0.6);
      padding: 20px;
      border-radius: 20px;
      position: relative;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 1.05em;
    }

    thead {
      font-weight: bold;
      border-bottom: 2px solid #c38eb4;
    }

    thead th {
      padding: 12px 0;
      border-right: 1px solid #ccc;
    }

    thead th:last-child {
      border-right: none;
    }

    tbody tr:nth-child(even) {
      background: #ffeaf4;
    }

    tbody tr:nth-child(odd) {
      background: #fff7fb;
    }

    tbody td {
      text-align: center;
      padding: 10px;
      border-right: 1px solid #ddd;
    }

    tbody td:last-child {
      border-right: none;
    }

    .star {
      color: gold;
    }

    .floating {
      position: absolute;
      animation: float 6s ease-in-out infinite;
      pointer-events: none;
    }

    .shooting-star {
      animation: shoot 4s linear infinite;
    }

    @keyframes shoot {
      0% { transform: translate(0, 0) scale(0.5); opacity: 0; }
      30% { opacity: 1; }
      100% { transform: translate(-300px, 300px) scale(1.2); opacity: 0; }
    }

  </style>
</head>

<body>
  <header>
    <img src="images/siwoolin.png" alt="주인공" class="char char-left">
    <h1 id="title" onclick="location.reload()">시우린의 노래책</h1>
    <img src="images/fan.png" alt="팬캐릭터" class="char char-right">
  </header>

  <nav>
    <button class="category active" onclick="filterCategory('all')">전체</button>
    <button class="category" onclick="filterCategory('kpop')">KPOP</button>
    <button class="category" onclick="filterCategory('jpop')">JPOP</button>
    <button class="category" onclick="filterCategory('pop')">POP</button>
    <button class="category" onclick="filterCategory('애교송')">애교송</button>
    <button class="category" onclick="filterCategory('연습곡')">연습곡</button>
    <button class="category" onclick="filterCategory('필독공지')">필독공지</button>
    <button class="sort-button" onclick="sortByDifficulty()">숙련도 높은 순</button>
  </nav>

  <div class="search-container">
    <input type="text" id="search" placeholder="노래 제목 또는 가수 검색..." oninput="searchSongs()">
  </div>

  <div class="notice">📌 연습 전 꼭 필독해주세요!</div>

  <div class="table-wrapper" id="song-table">
    <table>
      <thead>
        <tr>
          <th>제목</th>
          <th>가수</th>
          <th>숙련도</th>
        </tr>
      </thead>
      <tbody id="song-list">
        <!-- JavaScript로 채워질 영역 -->
      </tbody>
    </table>
  </div>

  <!-- 배경 애니메이션 요소 (이미지 파일 연결 필요) -->
  <img src="images/headset.png" class="floating" style="top: 20%; left: 70%; width: 120px;">
  <img src="images/shootingstar.png" class="floating shooting-star" style="top: 10%; left: 50%; width: 50px;">
  <img src="images/cloudblue.png" class="floating" style="top: 40%; left: 20%; width: 100px;">
  <img src="images/balloonheart.png" class="floating" style="top: 60%; left: 35%; width: 80px;">
  <img src="images/cloudpink.png" class="floating" style="top: 25%; left: 80%; width: 90px;">
  <img src="images/star.png" class="floating" style="top: 70%; left: 15%; width: 40px;">

  <script>
    const songs = [
      { title: "노래제목1", artist: "가수1", difficulty: 2, category: "kpop" },
      { title: "노래제목2", artist: "가수2", difficulty: 3, category: "jpop" },
      { title: "노래제목3", artist: "가수3", difficulty: 1, category: "필독공지" },
    ];

    function renderSongs(list) {
      const tbody = document.getElementById("song-list");
      tbody.innerHTML = "";
      if (list.length === 0) {
        const row = `<tr><td colspan="3">없는 노래는 채팅으로 신청하기!</td></tr>`;
        tbody.innerHTML = row;
        return;
      }
      list.forEach(song => {
        const stars = "★".repeat(song.difficulty) + "☆".repeat(3 - song.difficulty);
        const row = `
          <tr>
            <td>${song.title}</td>
            <td>${song.artist}</td>
            <td class="star">${stars}</td>
          </tr>`;
        tbody.innerHTML += row;
      });
    }

    function filterCategory(cat) {
      document.querySelectorAll('.category').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      if (cat === 'all') return renderSongs(songs);
      renderSongs(songs.filter(s => s.category === cat));
    }

    function sortByDifficulty() {
      const sorted = [...songs].sort((a, b) => b.difficulty - a.difficulty);
      renderSongs(sorted);
    }

    function searchSongs() {
      const keyword = document.getElementById("search").value.toLowerCase();
      const filtered = songs.filter(s =>
        s.title.toLowerCase().includes(keyword) ||
        s.artist.toLowerCase().includes(keyword)
      );
      renderSongs(filtered);
    }

    window.onload = () => renderSongs(songs);
  </script>
</body>
</html>
